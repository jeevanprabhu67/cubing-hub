<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Cubing Hub</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    body {margin:0;font-family:Arial,sans-serif;background:#fff;color:#000;min-height:100vh;}
    body::before{content:"";position:fixed;inset:0;background:url('https://upload.wikimedia.org/wikipedia/commons/6/6d/Rubik%27s_cube_scrambled.svg') center/420px no-repeat;opacity:0.08;pointer-events:none;z-index:-1;}
    .container{max-width:960px;margin:36px auto;padding:0 16px;}
    .card{background:#000;color:#fff;border-radius:14px;padding:22px;text-align:center;box-shadow:0 16px 40px rgba(0,0,0,0.35);border:1px solid #1f1f1f;}
    h1,h2,h3{margin:0 0 16px 0;}
    .row{display:flex;flex-wrap:wrap;justify-content:center;gap:12px;}
    .btn{display:inline-block;margin:8px;padding:12px 18px;background:#0078d7;color:#fff;border:none;border-radius:10px;cursor:pointer;font-weight:700;min-width:220px;}
    .btn:hover{background:#005a9e;}
    .stats{font-weight:700;color:#5fe3a1;margin:10px 0 16px;}
    .q{font-size:1.1rem;margin:10px 0 16px;}
    .grid{display:grid;grid-template-columns:1fr 1fr;gap:10px;text-align:left;}
    @media(max-width:640px){.grid{grid-template-columns:1fr;}}
    .opt{background:#1b1b1b;border:1px solid #2a2a2a;border-radius:10px;padding:10px;cursor:pointer;color:#fff;}
    table{width:100%;border-collapse:collapse;margin-top:14px;}
    th,td{border:1px solid #2a2a2a;padding:10px;text-align:left;vertical-align:top;}
    th{background:#0f0f0f;}td{background:#111;}
    .thumb{width:120px;height:80px;border:1px solid #2a2a2a;border-radius:8px;background:#222;display:flex;align-items:center;justify-content:center;color:#fff;font-weight:700;}
    img.alg{width:120px;height:80px;border:1px solid #2a2a2a;border-radius:8px;object-fit:contain;background:#222;}
    input[type="text"]{width:100%;padding:10px;border-radius:8px;border:1px solid #2a2a2a;background:#1b1b1b;color:#fff;font-size:1rem;margin:8px 0 12px;}
    .note{color:#cfcfcf;font-size:0.95rem;margin-bottom:10px;}
    .divider{height:1px;background:#2a2a2a;margin:16px 0;}
  </style>
</head>
<body>
<div class="container"><div class="card" id="app"></div></div>
<script>
const COIN_KEY='cubingHubCoins', OWNED_KEY='cubingHubOwned';
const getCoins=()=>parseInt(localStorage.getItem(COIN_KEY)||'0',10);
const setCoins=v=>localStorage.setItem(COIN_KEY,String(v));
const getOwned=()=>{try{return new Set(JSON.parse(localStorage.getItem(OWNED_KEY)||'[]'));}catch{return new Set();}};
const setOwned=set=>localStorage.setItem(OWNED_KEY,JSON.stringify([...set]));
const app=document.getElementById('app');
let coins=getCoins(),owned=getOwned();

// PLL reference
const PLL={T:"R U R' U' R' F R2 U' R' U' R U R' F'"};
const TPERM=PLL.T;

// Shop
const SHOP_ITEMS=[{id:"F2L2LOOK",name:"2-Look F2L",cost:10},{id:"OLL_FULL",name:"OLL (Full)",cost:20},{id:"ZBLL_FULL",name:"ZBLL (Sample)",cost:50}];

// 2-Look F2L unlock data
const F2L2LOOK_ALGS=[{name:"2-Look F2L (basic pair insert)",alg:"U R U' R'"},{name:"2-Look F2L (alt insert)",alg:"y' U' R' U R"}];

// Full OLL (57 images from algdb.net)
const OLL=Array.from({length:57},(_,i)=>({
  name:`OLL ${i+1}`,
  alg:"(Fill with preferred alg from algdb)",
  img:`https://algdb.net/img/oll/oll${i+1}.png`
}));

// Sample ZBLL
const ZBLL=[
  {name:"ZBLL U1",alg:"(See algdb)",img:"https://algdb.net/img/zbll/u1.png"},
  {name:"ZBLL U2",alg:"(See algdb)",img:"https://algdb.net/img/zbll/u2.png"},
  {name:"ZBLL H1",alg:"(See algdb)",img:"https://algdb.net/img/zbll/h1.png"},
  {name:"ZBLL Pi1",alg:"(See algdb)",img:"https://algdb.net/img/zbll/pi1.png"},
  {name:"ZBLL T1",alg:"(See algdb)",img:"https://algdb.net/img/zbll/t1.png"}
];

// Spreadsheet renderer
function renderSpreadsheet(){
  const unlocked = [
    owned.has("F2L2LOOK") ? "2-Look F2L" : null,
    owned.has("OLL_FULL") ? "OLL (Full)" : null,
    owned.has("ZBLL_FULL") ? "ZBLL (Sample)" : null
  ].filter(Boolean);

  const pllRows = `<tr><td>T-perm</td><td>${TPERM}</td><td><div class="thumb">T</div></td></tr>`;

  let extrasHTML = "";

  if(owned.has("F2L2LOOK")){
    extrasHTML += `
      <div class="divider"></div>
      <h3>2-Look F2L</h3>
      <table>
        <tr><th>Name</th><th>Algorithm</th><th>Picture</th></tr>
        ${F2L2LOOK_ALGS.map(x => `
          <tr>
            <td>${x.name}</td>
            <td>${x.alg}</td>
            <td><div class="thumb">F2L</div></td>
          </tr>`).join("")}
      </table>`;
  }

  if(owned.has("OLL_FULL")){
    const ollRows = OLL.map(c => `
      <tr>
        <td>${c.name}</td>
        <td>${c.alg}</td>
        <td><img class="alg" src="${c.img}" alt="${c.name}"></td>
      </tr>`).join('');
    extrasHTML += `
      <div class="divider"></div>
      <h3>OLL (57 cases)</h3>
      <table>
        <tr><th>Name</th><th>Algorithm</th><th>Picture</th></tr>
        ${ollRows}
      </table>`;
  }

  if(owned.has("ZBLL_FULL")){
    const zbllRows = ZBLL.map(c => `
      <tr>
        <td>${c.name}</td>
        <td>${c.alg}</td>
        <td><img class="alg" src="${c.img}" alt="${c.name}"></td>
      </tr>`).join('');
    extrasHTML += `
      <div class="divider"></div>
      <h3>ZBLL (sample)</h3>
      <table>
        <tr><
