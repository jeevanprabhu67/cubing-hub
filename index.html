<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Cubing Hub</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    body {margin:0;font-family:Arial,sans-serif;background:#fff;color:#000;min-height:100vh;}
    body::before{content:"";position:fixed;inset:0;background:url('https://upload.wikimedia.org/wikipedia/commons/6/6d/Rubik%27s_cube_scrambled.svg') center/420px no-repeat;opacity:0.08;pointer-events:none;z-index:-1;}
    .container{max-width:960px;margin:36px auto;padding:0 16px;}
    .card{background:#000;color:#fff;border-radius:14px;padding:22px;text-align:center;box-shadow:0 16px 40px rgba(0,0,0,0.35);border:1px solid #1f1f1f;}
    h1,h2,h3{margin:0 0 16px 0;}
    .row{display:flex;flex-wrap:wrap;justify-content:center;gap:12px;}
    .btn{display:inline-block;margin:8px;padding:12px 18px;background:#0078d7;color:#fff;border:none;border-radius:10px;cursor:pointer;font-weight:700;min-width:220px;}
    .btn:hover{background:#005a9e;}
    .stats{font-weight:700;color:#5fe3a1;margin:10px 0 16px;}
    .q{font-size:1.1rem;margin:10px 0 16px;}
    .grid{display:grid;grid-template-columns:1fr 1fr;gap:10px;text-align:left;}
    @media(max-width:640px){.grid{grid-template-columns:1fr;}}
    .opt{background:#1b1b1b;border:1px solid #2a2a2a;border-radius:10px;padding:10px;cursor:pointer;color:#fff;}
    table{width:100%;border-collapse:collapse;margin-top:14px;}
    th,td{border:1px solid #2a2a2a;padding:10px;text-align:left;vertical-align:top;}
    th{background:#0f0f0f;}td{background:#111;}
    .thumb{width:120px;height:80px;border:1px solid #2a2a2a;border-radius:8px;background:#222;display:flex;align-items:center;justify-content:center;color:#fff;font-weight:700;}
    img.alg{width:120px;height:80px;border:1px solid #2a2a2a;border-radius:8px;object-fit:contain;background:#222;}
    input[type="text"]{width:100%;padding:10px;border-radius:8px;border:1px solid #2a2a2a;background:#1b1b1b;color:#fff;font-size:1rem;margin:8px 0 12px;}
    .note{color:#cfcfcf;font-size:0.95rem;margin-bottom:10px;}
    .divider{height:1px;background:#2a2a2a;margin:16px 0;}
  </style>
</head>
<body>
<div class="container"><div class="card" id="app"></div></div>
<script>
const COIN_KEY='cubingHubCoins', OWNED_KEY='cubingHubOwned';
const getCoins=()=>parseInt(localStorage.getItem(COIN_KEY)||'0',10);
const setCoins=v=>localStorage.setItem(COIN_KEY,String(v));
const getOwned=()=>{try{return new Set(JSON.parse(localStorage.getItem(OWNED_KEY)||'[]'));}catch{return new Set();}};
const setOwned=set=>localStorage.setItem(OWNED_KEY,JSON.stringify([...set]));
const app=document.getElementById('app');
let coins=getCoins(),owned=getOwned(),deck=[],idx=0,score=0,usedReviveMC=false,usedReviveInput=false;

// PLL reference
const PLL={T:"R U R' U' R' F R2 U' R' U' R U R' F'"};
const TPERM=PLL.T;

// Shop
const SHOP_ITEMS=[{id:"F2L2LOOK",name:"2-Look F2L",cost:10},{id:"OLL_FULL",name:"OLL (Full)",cost:20},{id:"ZBLL_FULL",name:"ZBLL (Sample)",cost:50}];

// Quiz questions (20)
const QUESTIONS=[ /* same 20 as before */ 
{q:"What is the 3×3 WR?",options:["3.47s","3.13s","3.21s","2.96s"],answer:1},
{q:"What does DNF mean?",options:["Did Not Finish","Does Not Fit","Deck Not Found","Deemed Not Fair"],answer:0},
{q:"Penalty if misaligned >45° at finish?",options:["+2","DNF","No penalty","Re-scramble"],answer:1},
{q:"Inspection 15–17s penalty?",options:["No penalty","+2","DNF","Disqualification"],answer:1},
{q:"God’s Number for 3×3?",options:["17","18","20","22"],answer:2},
{q:"CFOP stands for?",options:["Cross,F2L,OLL,PLL","Corner First","Center First","Cross,F2L,Orientation,Permutation"],answer:0},
{q:"Which step orients the last layer?",options:["F2L","OLL","PLL","Cross"],answer:1},
{q:"WCA stands for?",options:["World Cubing Association","World Cube Association","World Contest of Algorithms","World Championship Athletics"],answer:1},
{q:"Approx. number of 3×3 states?",options:["43 million","43 billion","43 quintillion","4.3 million"],answer:2},
{q:"Scramble notation uses?",options:["Face turns with ',2","Edge rotations","Vertex swaps","Block moves"],answer:0},
{q:"Timer start +2 can occur when?",options:["Hands not on sensors","Starting before green light","Touch cube during inspection","Not resetting"],answer:1},
{q:"PLL primarily?",options:["Orients LL","Permutes LL","Solves F2L","Creates cross"],answer:1},
{q:"DNF due to timer stop can be:",options:["One hand only","Not stopping in 0.5s","Failing both sensors","Stopping late"],answer:2},
{q:"Which event is one-handed?",options:["3×3 OH","Pyraminx","Skewb","Clock"],answer:0},
{q:"OLL skip means:",options:["No algs","OLL solved after F2L","PLL unnecessary","Cross solved"],answer:1},
{q:"Best early CFOP improvement:",options:["Full OLL","Full PLL","Full F2L","No algs"],answer:1},
{q:"+2 at finish for alignment:",options:["Any misalignment","≤45° misalignment","90° misaligned","Judge only"],answer:1},
{q:"Inspection time allowed?",options:["10s","12s","15s","20s"],answer:2},
{q:"TPS stands for?",options:["Turns Per Second","Twists Per Solve","Time Per Step","Total Permutation Set"],answer:0},
{q:"Pyraminx notation includes?",options:["R U L F D B","Face + tip moves","Slice moves","Rotations only"],answer:1}
];

// Revive MCQ pool
const REVIVE_PLL=[{q:"Which PLL swaps opposite edges?",options:["H perm","Z perm","Ua perm","Ub perm"],answer:0},{q:"Which PLL swaps adjacent edges?",options:["Z perm","H perm","Ua perm","Ub perm"],answer:1}];

// 2-Look F2L unlock data
const F2L2LOOK_ALGS=[{name:"2-Look F2L (basic pair insert)",alg:"U R U' R'"},{name:"2-Look F2L (alt insert)",alg:"y' U' R' U R"}];

// Full OLL (57 images from algdb.net)
const OLL=Array.from({length:57},(_,i)=>({name:`OLL ${i+1}`,alg:"(See algdb for preferred alg)",img:`https://algdb.net/img/oll/oll${i+1}.png`}));

// Sample ZBLL
const ZBLL=[{name:"ZBLL U1",alg:"(See algdb)",img:"https://algdb.net/img/zbll/u1.png"},{name:"ZBLL U2",alg:"(See algdb)",img:"https://algdb.net/img/zbll/u2.png"},{name:"ZBLL H1",alg:"(See algdb)",img:"https://algdb.net/img/zbll/h1.png"},{name:"ZBLL Pi1",alg:"(See algdb)",img:"https://algdb.net/img/zbll/pi1.png"},{name:"ZBLL T
